# Docker Compose ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Ð´Ð»Ñ Coolify
# Coolify Ð¸Ñ‰ÐµÑ‚ Ñ„Ð°Ð¹Ð» Ñ Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð¸ÐµÐ¼ .yaml
#
# âš ï¸ Ð’ÐÐ–ÐÐž: MongoDB ÐÐ• Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ð° Ð² ÑÑ‚Ð¾Ñ‚ Ñ„Ð°Ð¹Ð»!
# MongoDB Ð´Ð¾Ð»Ð¶Ð½Ð° Ð±Ñ‹Ñ‚ÑŒ Ñ€Ð°Ð·Ð²ÐµÑ€Ð½ÑƒÑ‚Ð° ÐºÐ°Ðº ÐžÐ¢Ð”Ð•Ð›Ð¬ÐÐ«Ð™ ÑÐµÑ€Ð²Ð¸Ñ Ð² Coolify
# 
# ðŸ“– Ð˜Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ñ Ð¿Ð¾ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐµ MongoDB: ÑÐ¼. MONGODB-SETUP.md
#
# Ð­Ñ‚Ð¾Ñ‚ Ñ„Ð°Ð¹Ð» ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ Ð¢ÐžÐ›Ð¬ÐšÐž Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Node.js
# MongoDB Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ð¾ Ñ‡ÐµÑ€ÐµÐ· Coolify UI

version: '3.8'

services:
  app:
    build:
      context: .
      dockerfile: Dockerfile
    restart: unless-stopped
    environment:
      - NODE_ENV=production
      - PORT=${PORT:-3000}
      # Ð’ Coolify MongoDB Ð±ÑƒÐ´ÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð° Ñ‡ÐµÑ€ÐµÐ· Ð²Ð½ÑƒÑ‚Ñ€ÐµÐ½Ð½ÑŽÑŽ ÑÐµÑ‚ÑŒ
      # Ð£ÐºÐ°Ð¶Ð¸Ñ‚Ðµ MONGODB_URI Ð² Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ Coolify
      # ÐŸÑ€Ð¸Ð¼ÐµÑ€: mongodb://mongodb:27017/helloworld
      - MONGODB_URI=${MONGODB_URI:-mongodb://mongodb:27017/helloworld}
    healthcheck:
      test: ["CMD", "node", "-e", "require('http').get('http://localhost:3000/api/health', (r) => process.exit(r.statusCode < 500 ? 0 : 1)).on('error', () => process.exit(1))"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

